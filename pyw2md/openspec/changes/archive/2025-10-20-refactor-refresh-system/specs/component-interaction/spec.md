## MODIFIED Requirements

### Requirement 1: 组件通信机制

系统应提供标准化的组件间通信机制。

#### Scenario: 组件状态同步
- **WHEN** 一个组件的状态发生变化
- **THEN** 相关组件应通过统一的状态管理器获得通知
- **AND** 状态更新应通过 `FileStateManager` 进行协调

#### Scenario: 文件监控与应用通信
- **WHEN** 文件监控器检测到文件变化
- **THEN** 应通过 `FileStateManager` 通知主应用
- **AND** 主应用应使用统一的防抖机制处理通知

### Requirement 2: 批量操作支持

组件应支持批量操作模式，优化性能。

#### Scenario: 批量文件操作
- **WHEN** 用户执行批量文件添加/删除
- **THEN** 组件应进入批量更新模式
- **AND** 所有更新应在批量结束后统一应用

#### Scenario: 批量文件变化处理
- **WHEN** 文件监控器检测到多个文件变化
- **THEN** 变化应通过 `FileStateManager` 批量处理
- **AND** UI更新应使用防抖机制合并处理

### Requirement 3: 状态栏角色

状态栏应作为统计信息和操作反馈的唯一展示中心。

#### Scenario: 统计信息更新
- **WHEN** 文件状态发生变化
- **THEN** 状态栏应通过统一接口更新显示
- **AND** 其他组件不应直接更新统计信息

#### Scenario: 文件变化通知显示
- **WHEN** 文件监控器检测到变化
- **THEN** 状态栏应显示文件变化的通知消息
- **AND** 消息应使用简洁的格式和统一的显示时长

## ADDED Requirements

### Requirement 4: 统一防抖机制

系统应提供统一的防抖机制供所有组件使用。

#### Scenario: UI更新防抖
- **WHEN** 任何组件需要更新UI
- **THEN** 应使用统一的 `SimpleDebouncer` 进行防抖处理
- **AND** 防抖时间应统一设置为300ms

#### Scenario: 防抖器复用
- **WHEN** 多个组件需要防抖功能
- **THEN** 应创建共享的防抖器实例
- **AND** 避免重复创建防抖逻辑

### Requirement 5: 错误处理和用户反馈

系统应提供统一的错误处理机制和用户反馈。

#### Scenario: 文件监控失败
- **WHEN** 文件监控器启动或运行失败
- **THEN** 系统应通过状态栏显示用户可见的错误消息
- **AND** 应提供功能降级和恢复机制

#### Scenario: 组件错误处理
- **WHEN** 任何组件发生可恢复的错误
- **THEN** 错误应通过统一的反馈机制通知用户
- **AND** 系统应尝试自动恢复或提供手动恢复选项

## REMOVED Requirements

### Requirement: 复杂通知组件交互

**Reason**: 复杂的通知栏UI组件创建了不必要的组件间依赖，增加了系统复杂度。

**Migration**:
- 移除通知栏相关的组件交互逻辑
- 简化组件间的直接依赖关系
- 使用状态栏作为统一的消息显示中心
- 保持组件间通信的简洁性和可维护性

### Requirement: 分散的状态管理

**Reason**: 状态分散在多个组件中导致数据不一致和同步困难。

**Migration**:
- 将所有文件变化状态集中到 `FileStateManager`
- 移除组件间的直接状态传递
- 使用统一的状态查询和更新接口
- 确保状态变更的原子性和一致性